<html>
  <head>
    <!-- leaflet -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css">
  
    <!-- deck.gl standalone bundle -->
    <script src="https://unpkg.com/deck.gl@^8.8.0/dist.min.js"></script>
    <!-- deck.gl-leaflet -->
    <script src="https://unpkg.com/deck.gl-leaflet@1.2.1/dist/deck.gl-leaflet.min.js"></script>

    <style>
      #map {
        position: absolute;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
      }
.leaflet-layer,
.leaflet-control-zoom-in,
.leaflet-control-zoom-out,
.leaflet-control-attribution {
  filter: invert(100%) hue-rotate(180deg) brightness(95%) contrast(90%);
}

    </style>
  </head>

  <body>
    <div id="map"></div>
  </body>

  <script type="text/javascript">

const test_url =
  'N00000897.geojson';

  const map = L.map(document.getElementById('map'), {
  center: [54.6, -6.5],
  zoom: 9,
});
L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
  attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',
}).addTo(map);

const colours = {15: [242, 240, 247, 200], 30: [203, 201, 226, 200], 45: [158, 154, 200, 200], 60: [106, 81, 163, 200]}

fetch(test_url)
.then(res => res.json())
.then(out => {
    out.features.sort((a,b) => b.properties['Travel Minutes'] - a.properties['Travel Minutes']);
    const deckLayer = new DeckGlLeaflet.LeafletLayer({
    views: [
        new deck.MapView({
        repeat: true
        })
    ],
    layers: [
        new deck.GeoJsonLayer({
            id: 'isochrones',
            data: out,
            // Styles
            filled: true,
            getFillColor: f => colours[f.properties['Travel Minutes']]
        }),
    ],
    });
    map.addLayer(deckLayer);

    const featureGroup = L.featureGroup();
    const marker = L.marker([out.features[0].properties.iso_centre_Y, out.features[0].properties.iso_centre_X], title='Hi');
    marker.bindTooltip(out.features[0].properties.SA2011).openTooltip();
    featureGroup.addLayer(marker);
    map.addLayer(featureGroup);
}
)
.catch(err => { throw err });



  </script>
</html>